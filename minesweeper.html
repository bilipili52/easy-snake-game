<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∞–ø—ë—Ä - –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            margin-top: 60px;
        }

        .game-header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            width: 300px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(10, 30px);
            grid-template-rows: repeat(10, 30px);
            gap: 2px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .cell {
            width: 30px;
            height: 30px;
            background: #ddd;
            border: 2px outset #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            user-select: none;
        }

        .cell.revealed {
            border: 1px solid #bbb;
            background: #eee;
        }

        .cell.mine {
            background: #ff4444;
        }

        .cell.flag {
            background: #ffeb3b;
            color: #333;
        }

        /* –¶–≤–µ—Ç–∞ –¥–ª—è —Ü–∏—Ñ—Ä */
        .cell.number-1 { color: #1976d2; }
        .cell.number-2 { color: #388e3c; }
        .cell.number-3 { color: #d32f2f; }
        .cell.number-4 { color: #7b1fa2; }
        .cell.number-5 { color: #ff8f00; }
        .cell.number-6 { color: #0097a7; }
        .cell.number-7 { color: #000000; }
        .cell.number-8 { color: #795548; }

        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
        }

        button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .game-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .win {
            background: rgba(76, 175, 80, 0.3);
            color: #c8e6c9;
        }

        .lose {
            background: rgba(244, 67, 54, 0.3);
            color: #ffcdd2;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>

    <div class="game-header">
        <h1>üéØ –°–∞–ø—ë—Ä</h1>
        <p>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏, –Ω–æ –∏–∑–±–µ–≥–∞–π—Ç–µ –º–∏–Ω!</p>
    </div>

    <div class="game-info">
        <div class="info-item">
            <div class="info-label">–ú–∏–Ω—ã</div>
            <div class="info-value" id="mineCount">15</div>
        </div>
        <div class="info-item">
            <div class="info-label">–§–ª–∞–≥–∏</div>
            <div class="info-value" id="flagCount">0</div>
        </div>
        <div class="info-item">
            <div class="info-label">–í—Ä–µ–º—è</div>
            <div class="info-value" id="timer">0</div>
        </div>
    </div>

    <div class="game-board" id="gameBoard">
        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JavaScript -->
    </div>

    <div class="controls">
        <button onclick="restartGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
        <button onclick="toggleFlagMode()">üö© –†–µ–∂–∏–º —Ñ–ª–∞–≥–æ–≤: <span id="flagMode">–í–´–ö–õ</span></button>
    </div>

    <div class="game-message" id="gameMessage">
        –©–µ–ª–∫–Ω–∏—Ç–µ –ª–µ–≤–æ–π –∫–Ω–æ–ø–∫–æ–π, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–µ—Ç–∫—É
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const ROWS = 10;
        const COLS = 10;
        const MINES = 15;

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let board = [];
        let gameOver = false;
        let gameWon = false;
        let flagMode = false;
        let flagsPlaced = 0;
        let startTime = null;
        let timerInterval = null;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const gameBoard = document.getElementById('gameBoard');
        const mineCountElement = document.getElementById('mineCount');
        const flagCountElement = document.getElementById('flagCount');
        const timerElement = document.getElementById('timer');
        const gameMessageElement = document.getElementById('gameMessage');
        const flagModeElement = document.getElementById('flagMode');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            board = [];
            gameOver = false;
            gameWon = false;
            flagMode = false;
            flagsPlaced = 0;
            startTime = null;
            
            clearInterval(timerInterval);
            timerElement.textContent = '0';
            flagModeElement.textContent = '–í–´–ö–õ';
            gameMessageElement.textContent = '–©–µ–ª–∫–Ω–∏—Ç–µ –ª–µ–≤–æ–π –∫–Ω–æ–ø–∫–æ–π, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–µ—Ç–∫—É';
            gameMessageElement.className = 'game-message';
            
            mineCountElement.textContent = MINES;
            flagCountElement.textContent = '0';
            
            createBoard();
            placeMines();
            calculateNumbers();
            renderBoard();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è
        function createBoard() {
            board = [];
            for (let row = 0; row < ROWS; row++) {
                board[row] = [];
                for (let col = 0; col < COLS; col++) {
                    board[row][col] = {
                        isMine: false,
                        isRevealed: false,
                        isFlagged: false,
                        neighborMines: 0
                    };
                }
            }
        }

        // –†–∞–∑–º–µ—â–µ–Ω–∏–µ –º–∏–Ω –Ω–∞ –ø–æ–ª–µ
        function placeMines() {
            let minesPlaced = 0;
            while (minesPlaced < MINES) {
                const row = Math.floor(Math.random() * ROWS);
                const col = Math.floor(Math.random() * COLS);
                
                if (!board[row][col].isMine) {
                    board[row][col].isMine = true;
                    minesPlaced++;
                }
            }
        }

        // –ü–æ–¥—Å—á–µ—Ç –º–∏–Ω –≤–æ–∫—Ä—É–≥ –∫–∞–∂–¥–æ–π –∫–ª–µ—Ç–∫–∏
        function calculateNumbers() {
            for (let row = 0; row < ROWS; row++) {
                for (let col = 0; col < COLS; col++) {
                    if (!board[row][col].isMine) {
                        let count = 0;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏
                        for (let i = -1; i <= 1; i++) {
                            for (let j = -1; j <= 1; j++) {
                                const newRow = row + i;
                                const newCol = col + j;
                                
                                if (newRow >= 0 && newRow < ROWS && 
                                    newCol >= 0 && newCol < COLS && 
                                    board[newRow][newCol].isMine) {
                                    count++;
                                }
                            }
                        }
                        
                        board[row][col].neighborMines = count;
                    }
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function renderBoard() {
            gameBoard.innerHTML = '';
            
            for (let row = 0; row < ROWS; row++) {
                for (let col = 0; col < COLS; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    const cellData = board[row][col];
                    
                    if (cellData.isRevealed) {
                        cell.classList.add('revealed');
                        if (cellData.isMine) {
                            cell.classList.add('mine');
                            cell.textContent = 'üí£';
                        } else if (cellData.neighborMines > 0) {
                            cell.textContent = cellData.neighborMines;
                            cell.classList.add(`number-${cellData.neighborMines}`);
                        }
                    } else if (cellData.isFlagged) {
                        cell.classList.add('flag');
                        cell.textContent = 'üö©';
                    }
                    
                    cell.addEventListener('click', () => handleCellClick(row, col));
                    cell.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        handleRightClick(row, col);
                    });
                    
                    gameBoard.appendChild(cell);
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–ª–µ—Ç–∫–µ
        function handleCellClick(row, col) {
            if (gameOver || board[row][col].isRevealed || board[row][col].isFlagged) {
                return;
            }
            
            if (!startTime) {
                startTime = Date.now();
                timerInterval = setInterval(updateTimer, 1000);
            }
            
            if (flagMode) {
                toggleFlag(row, col);
                return;
            }
            
            revealCell(row, col);
            
            if (board[row][col].isMine) {
                gameOver = true;
                revealAllMines();
                gameMessageElement.textContent = 'üí• –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í—ã –Ω–∞—Ç–∫–Ω—É–ª–∏—Å—å –Ω–∞ –º–∏–Ω—É!';
                gameMessageElement.classList.add('lose');
                clearInterval(timerInterval);
            } else {
                checkWinCondition();
            }
            
            renderBoard();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∞–≤–æ–≥–æ –∫–ª–∏–∫–∞ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–∂–∫–∞)
        function handleRightClick(row, col) {
            if (gameOver || board[row][col].isRevealed) {
                return;
            }
            
            toggleFlag(row, col);
            renderBoard();
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞/—Å–Ω—è—Ç–∏–µ —Ñ–ª–∞–∂–∫–∞
        function toggleFlag(row, col) {
            if (board[row][col].isFlagged) {
                board[row][col].isFlagged = false;
                flagsPlaced--;
            } else {
                board[row][col].isFlagged = true;
                flagsPlaced++;
            }
            
            flagCountElement.textContent = flagsPlaced;
            checkWinCondition();
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–ª–µ—Ç–∫–∏
        function revealCell(row, col) {
            if (row < 0 || row >= ROWS || col < 0 || col >= COLS || 
                board[row][col].isRevealed || board[row][col].isFlagged) {
                return;
            }
            
            board[row][col].isRevealed = true;
            
            // –ï—Å–ª–∏ –∫–ª–µ—Ç–∫–∞ –ø—É—Å—Ç–∞—è, –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
            if (board[row][col].neighborMines === 0 && !board[row][col].isMine) {
                for (let i = -1; i <= 1; i++) {
                    for (let j = -1; j <= 1; j++) {
                        revealCell(row + i, col + j);
                    }
                }
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
        function checkWinCondition() {
            let unrevealedSafeCells = 0;
            
            for (let row = 0; row < ROWS; row++) {
                for (let col = 0; col < COLS; col++) {
                    if (!board[row][col].isRevealed && !board[row][col].isMine) {
                        unrevealedSafeCells++;
                    }
                }
            }
            
            if (unrevealedSafeCells === 0) {
                gameWon = true;
                gameOver = true;
                gameMessageElement.textContent = 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–±–µ–¥–∏–ª–∏!';
                gameMessageElement.classList.add('win');
                clearInterval(timerInterval);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –º–∏–Ω—ã –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ
        function revealAllMines() {
            for (let row = 0; row < ROWS; row++) {
                for (let col = 0; col < COLS; col++) {
                    if (board[row][col].isMine) {
                        board[row][col].isRevealed = true;
                    }
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
        function updateTimer() {
            if (startTime) {
                const currentTime = Math.floor((Date.now() - startTime) / 1000);
                timerElement.textContent = currentTime;
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ñ–ª–∞–≥–æ–≤
        function toggleFlagMode() {
            flagMode = !flagMode;
            flagModeElement.textContent = flagMode ? '–í–ö–õ' : '–í–´–ö–õ';
            gameMessageElement.textContent = flagMode ? 
                '–†–µ–∂–∏–º —Ñ–ª–∞–≥–æ–≤: —â–µ–ª–∫–∞–π—Ç–µ –ø–æ –∫–ª–µ—Ç–∫–∞–º –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–∂–∫–æ–≤' : 
                '–†–µ–∂–∏–º –æ—Ç–∫—Ä—ã—Ç–∏—è: —â–µ–ª–∫–∞–π—Ç–µ –ø–æ –∫–ª–µ—Ç–∫–∞–º –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è';
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            initGame();
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = initGame;
    </script>
</body>
</html>